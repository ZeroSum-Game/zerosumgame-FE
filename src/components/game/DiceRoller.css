.dice-roller {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 16px;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  perspective: 800px;
  /* Enhanced perspective for 3D */
}

.dice-roller-holding .scene {
  animation: shake 0.1s infinite;
}

.dice-row {
  display: flex;
  gap: 30px;
  /* Increased gap for 3D cubes */
}

/* 3D cube dice (CSS) */
.dice-cube-shell {
  width: 56px;
  height: 56px;
  perspective: 600px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.dice-cube-shell.settling {
  animation: diceCubeSettle 220ms ease-out;
}

.dice-cube {
  width: 56px;
  height: 56px;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.dice-cube.rolling {
  animation: diceCubeRoll 0.8s ease-in-out infinite;
}

.dice-face {
  position: absolute;
  width: 56px;
  height: 56px;
  border-radius: 14px;
  border: 1px solid rgba(255, 255, 255, 0.14);
  background: linear-gradient(135deg, rgba(15, 23, 42, 0.95), rgba(2, 6, 23, 0.95));
  box-shadow: 0 18px 60px -40px rgba(0, 0, 0, 0.9), inset 0 0 12px rgba(255, 255, 255, 0.04);
  display: flex;
  align-items: center;
  justify-content: center;
  backface-visibility: hidden;
}

.dice-face--front {
  transform: translateZ(28px);
}

.dice-face--back {
  transform: rotateY(180deg) translateZ(28px);
}

.dice-face--right {
  transform: rotateY(90deg) translateZ(28px);
}

.dice-face--left {
  transform: rotateY(-90deg) translateZ(28px);
}

.dice-face--top {
  transform: rotateX(90deg) translateZ(28px);
}

.dice-face--bottom {
  transform: rotateX(-90deg) translateZ(28px);
}

.dice-pip-grid {
  width: 70%;
  height: 70%;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(3, 1fr);
  gap: 4px;
}

.dice-pip {
  width: 7px;
  height: 7px;
  border-radius: 999px;
  background: transparent;
  justify-self: center;
  align-self: center;
}

.dice-pip.on {
  background: #f8fafc;
  box-shadow: 0 0 6px rgba(248, 250, 252, 0.7);
}

@keyframes diceCubeRoll {
  0% {
    transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg);
  }

  25% {
    transform: rotateX(90deg) rotateY(90deg) rotateZ(0deg);
  }

  50% {
    transform: rotateX(180deg) rotateY(180deg) rotateZ(90deg);
  }

  75% {
    transform: rotateX(270deg) rotateY(270deg) rotateZ(180deg);
  }

  100% {
    transform: rotateX(360deg) rotateY(360deg) rotateZ(360deg);
  }
}

@keyframes diceCubeSettle {
  0% {
    transform: scale(1.08);
  }

  100% {
    transform: scale(1);
  }
}

/* 3D Cube Styles */
.scene {
  width: 60px;
  height: 60px;
  perspective: 400px;
}

.cube {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1);
  /* Smooth settle */
  will-change: transform;
}

.cube__face {
  position: absolute;
  width: 60px;
  height: 60px;
  border: 2px solid rgba(255, 255, 255, 0.8);
  line-height: 56px;
  font-size: 28px;
  font-weight: 900;
  color: #1e293b;
  text-align: center;
  background: white;
  /* White dice */
  box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.1);
  border-radius: 8px;
  backface-visibility: hidden;
  /* Hide back face for better performance/look */
}

/* Make dots instead of numbers? User asked for "dice eyes" (주사위 눈). 
   Let's stick to numbers for now as in code, but maybe styled like dots later if needed.
   Code used numbers. */

.cube__face--front {
  transform: rotateY(0deg) translateZ(30px);
}

.cube__face--right {
  transform: rotateY(90deg) translateZ(30px);
}

.cube__face--back {
  transform: rotateY(180deg) translateZ(30px);
}

.cube__face--left {
  transform: rotateY(-90deg) translateZ(30px);
}

.cube__face--top {
  transform: rotateX(90deg) translateZ(30px);
}

.cube__face--bottom {
  transform: rotateX(-90deg) translateZ(30px);
}

.dice-meta {
  height: 24px;
  font-size: 14px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.7);
  text-align: center;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
  margin-top: 10px;
}

@keyframes shake {
  0% {
    transform: translate(1px, 1px) rotate(0deg);
  }

  10% {
    transform: translate(-1px, -2px) rotate(-1deg);
  }

  20% {
    transform: translate(-3px, 0px) rotate(1deg);
  }

  30% {
    transform: translate(3px, 2px) rotate(0deg);
  }

  40% {
    transform: translate(1px, -1px) rotate(1deg);
  }

  50% {
    transform: translate(-1px, 2px) rotate(-1deg);
  }

  60% {
    transform: translate(-3px, 1px) rotate(0deg);
  }

  70% {
    transform: translate(3px, 1px) rotate(-1deg);
  }

  80% {
    transform: translate(-1px, -1px) rotate(1deg);
  }

  90% {
    transform: translate(1px, 2px) rotate(0deg);
  }

  100% {
    transform: translate(1px, -2px) rotate(-1deg);
  }
}